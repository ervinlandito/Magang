<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
    />
    <link rel="stylesheet" href="/css/admin.css" />
  </head>

  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <p class="navbar-brand m-0">Admin Dashboard</p>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav w-100 justify-content-end">
            <button type="button" id="btnLogout" class="btn btn-danger">
              logout
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Search bar -->
    <div id="searchBar" class="my-3 ms-4">
      <label for="search">Search</label>
      <input type="text" id="searchInput" />
    </div>

    <!-- Table -->
    <div class="px-4 table-responsive-sm mt -4">
      <table class="table table-bordered">
        <thead class="bg-dark text-white">
          <tr>
            <th scope="col">Nama UMKM</th>
            <th scope="col">Nama Owner</th>
            <th scope="col">Instagram</th>
            <th scope="col">Link Google Maps</th>
            <th scope="col">Whatsapp</th>
            <th scope="col">Aksi</th>
          </tr>
        </thead>
        <tbody>
          <% for (let i=0; i < data.length; i++) { %>
          <tr id="<%= data[i].id %>">
            <td><%= data[i].umkm_name %></td>
            <td><%= data[i].umkm_owner %></td>
            <td class="row-long">
              <a
                href="<%= data[i].instagram %>"
                target="_blank"
                rel="noopener noreferrer"
              >
                <%= data[i].instagram %>
              </a>
            </td>
            <td class="text-break row-long">
              <a
                href="<%= data[i].gmaps_url %>"
                target="_blank"
                rel="noopener noreferrer"
              >
                <%= data[i].gmaps_url %>
              </a>
            </td>
            <td class="row-long text-break">
              <a
                href="<%= data[i].whatsapp %>"
                target="_blank"
                rel="noopener noreferrer"
              >
                <%= data[i].whatsapp %>
              </a>
            </td>
            <td>
              <div class="d-flex flex-row">
                <a
                  href="/tjs/admin/edit/<%= data[i].id %>"
                  class="btn btn-dark me-2"
                  >Edit</a
                >
                <button class="btn btn-danger btnDelete">Hapus</button>
              </div>
            </td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </div>
    <div class="d-flex justify-content-end px-4">
      <button
        id="addButton"
        type="button"
        class="btn btn-dark btn-trigger-modal"
        data-bs-toggle="modal"
        data-bs-target="#modalAddData"
      >
        Tambah Data
      </button>
    </div>

    <!-- Modal Add Data -->
    <div
      class="modal fade"
      id="modalAddData"
      tabindex="-1"
      aria-labelledby="modalAddDataLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-dark text-light">
            <h5 class="modal-title" id="exampleModalLabel">Tambah Data UMKM</h5>
          </div>
          <div class="modal-body">
            <form id="addDataForm">
              <label for="umkm_name">Nama UMKM</label>
              <input
                type="text"
                id="umkm_name"
                name="umkm_name"
                class="form-input px-2 py-2 mb-0"
                required
              />
              <span id="umkmNameError" class="text-danger"></span>
              <!-- Error span for UMKM Name -->
              <br />
              <label for="umkm_owner">Pemilik UMKM</label>
              <input
                type="text"
                id="umkm_owner"
                name="umkm_owner"
                class="form-input px-2 py-2 mb-0"
                required
              />
              <span id="umkmOwnerError" class="text-danger"></span>
              <!-- Error span for UMKM Owner -->
              <br />
              <label for="instagram_url">Link Instagram</label>
              <input
                type="text"
                id="instagram_url"
                name="instagram_url"
                class="form-input px-2 py-2 mb-0"
                required
              />
              <span id="instagramUrlError" class="text-danger"></span>
              <!-- Error span for Instagram URL -->
              <br />
              <label for="whatsapp_number">Whatsapp</label>
              <input
                type="text"
                id="whatsapp_number"
                name="whatsapp_number"
                class="form-input px-2 py-2 mb-0"
                required
              />
              <div id="whatsapp_number_help" class="form-text">
                Cukup masukkan nomor hp saja
              </div>
              <span id="whatsappNumberError" class="text-danger"></span>
              <!-- Error span for WhatsApp Number -->

              <label for="gmaps_url">Link Google Maps</label>
              <input
                type="text"
                id="gmaps_url"
                name="gmaps_url"
                class="form-input px-2 py-2 mb-0"
                required
              />
              <span id="gmapsUrlError" class="text-danger"></span>
              <!-- Error span for Google Maps URL -->
              <br />
              <label for="latitude">Latitude</label>
              <input
                type="text"
                id="latitude"
                name="latitude"
                class="form-input px-2 py-2"
              />
              <span id="latitudeError" class="text-danger"></span>
              <!-- Error span for Latitude -->
              <br />
              <label for="longitude">Longitude</label>
              <input
                type="text"
                id="longitude"
                name="longitude"
                class="form-input px-2 py-2"
              />
              <span id="longitudeError" class="text-danger"></span>
              <!-- Error span for Longitude -->

              <button type="submit" class="btn btn-dark btn-submit py-3">
                Simpan
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script src="/js/admin.js"></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </body>
</html>
